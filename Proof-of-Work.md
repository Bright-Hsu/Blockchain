# 工作量证明

## 一.定义

工作量证明系统是一种防止服务攻击及其它服务滥用的经济方式，它要求服务请求方完成某些工作——通常意味着需要请求方计算机完成一定计算量。这种方案的一个关键特征是不对成性：对请求方来说，所需要做的工作有较大难度；但对于服务提供方来说，工作量的验证却比较容易。
工作量证明中包含了两层含义:

1. 工作者需要完成的工作必须有一定的量，这个量由工作验证者给出；
2. 验证者可以迅速的检验工作量是否达标，注意这里的检验完成过程必须简单；

区块链的一个关键点就是，一个人必须经过一系列困难的工作，才能将数据放入到区块链中。正是这种困难的工作，才使得区块链是安全和一致的。此外，完成这个工作的人也会获得奖励（这也就是通过挖矿获得币）。

## 二.技术原理
### 哈希函数
工作量证明最常用的技术原理是哈希函数。哈希有以下几个关键特性：

1. 无法从一个哈希值恢复原始数据；
2. 对于特定的数据，只能有一个哈希，并且这个哈希是唯一的；
3. 即使是仅仅改变输入数据中的一个字节，也会导致输出一个完全不同的哈希；
4. 
由于输入散列函数H()的任意值n，会对应到一个H(n)结果，而n只要变动一个比特，就会引起雪崩效应(avalanche effect)，所以几乎无法从H(n)反推回n，因此借由指定查找H(n)的特征，让用户进行大量的穷举运算，就可以达成工作量证明。

在区块链中，哈希被用于保证一个块的一致性。哈希算法的输入数据包含了前一个块的哈希，因此使得不太可能去修改链中的一个块：因为如果一个人想要修改前面一个块的哈希，那么他必须要重新计算这个块以及后面所有块的哈希。

### 哈希现金
哈希现金是一种工作量证明机制，在比特币之前，哈希现金被用于垃圾邮件的过滤。哈希现金（hashcash ）的灵感来自于这样一个想法，即一些数学结果难于发现而易于校验。比特币使用的原理就类似于HashCash。与邮件应用程序中的hashcash相比，比特币加密电子货币网络采用了不同的基于哈希的工作量证明，以实现比特币的竞争挖掘。

尽管hashcash使用SHA-1散列，并且要求160个散列位中的前20个为零，但比特币的工作证明使用两个连续的SHA-256散列，并且最初需要至少256个散列位中的前32个为零。然而，比特币网络定期重置难度级别，以保持每小时6块的平均创建速度。截至2017年8月（区块＃478608），比特币网络已经要求256个哈希位中的前72个必须为零。

## 三.实现
